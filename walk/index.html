<!DOCTYPE html>
<html>
<head>
    <title>Valentine's AR Heart Hunt ‚ù§Ô∏è</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ar.js/2.2.2/aframe-ar.min.js"></script>
    <style>
        #ui-container {
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 100;
            pointer-events: none;
        }

        #score {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            margin: 20px auto;
            width: fit-content;
            font-family: Arial, sans-serif;
            font-size: 24px;
            pointer-events: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        #message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 64, 129, 0.95);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-family: Arial, sans-serif;
            text-align: center;
            display: none;
            max-width: 80%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            z-index: 1000;
        }

        #start-button {
            background: #ff4081;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            color: white;
            font-size: 18px;
            margin-top: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255,64,129,0.3);
        }

        .hint {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="start-screen">
        <h1>‚ù§Ô∏è Valentine's Heart Hunt ‚ù§Ô∏è</h1>
        <p>Find and collect all the floating hearts!</p>
        <p class="hint">Walk around to discover hearts in your surroundings</p>
        <button id="start-button">Start Hunt</button>
    </div>

    <div id="ui-container">
        <div id="score">Hearts: <span id="heart-count">0</span>/5</div>
    </div>

    <div id="message"></div>

    <a-scene embedded arjs="trackingMethod: best; debugUIEnabled: false;" vr-mode-ui="enabled: false" renderer="antialias: true">
        <a-camera position="0 1.6 0">
            <a-entity cursor="fuse: false; rayOrigin: mouse;"
                      raycaster="far: 50; interval: 100"></a-entity>
        </a-camera>

        <a-entity id="heart-container">
            <!-- Hearts will be added here -->
        </a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('clickable', {
            init: function() {
                this.el.addEventListener('click', () => {
                    if (!this.el.collected) {
                        collectHeart(this.el);
                    }
                });
            }
        });

        let collectedHearts = 0;
        const messages = [
            "You found a heart! Keep looking! üíï",
            "Another heart! You're doing great! üíù",
            "Three hearts! Almost there! üíì",
            "Just one more to go! üíó",
            "You found all the hearts!\n\nI love you more than all the stars in the sky... üåü\n\nHappy Valentine's Day! ‚ù§Ô∏è"
        ];

        function createHeart(position) {
            const heart = document.createElement('a-entity');
            heart.setAttribute('position', position);
            heart.setAttribute('gltf-model', 'https://cdn.aframe.io/examples/heart/heart.gltf');
            heart.setAttribute('scale', '0.5 0.5 0.5');
            heart.setAttribute('clickable', '');
            heart.setAttribute('animation', {
                property: 'position',
                dir: 'alternate',
                dur: 1000 + Math.random() * 1000,
                easing: 'easeInOutSine',
                loop: true,
                to: `${position.x} ${position.y + 0.2} ${position.z}`
            });
            heart.setAttribute('animation__rotate', {
                property: 'rotation',
                dur: 3000,
                easing: 'linear',
                loop: true,
                to: '0 360 0'
            });
            return heart;
        }

        function collectHeart(heart) {
            heart.collected = true;
            collectedHearts++;
            document.getElementById('heart-count').textContent = collectedHearts;

            // Play collection animation
            heart.setAttribute('animation__collect', {
                property: 'scale',
                to: '0 0 0',
                dur: 500,
                easing: 'easeInQuad'
            });

            // Show message
            const message = document.getElementById('message');
            message.textContent = messages[collectedHearts - 1];
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);

            // Remove heart after animation
            setTimeout(() => {
                heart.parentNode.removeChild(heart);
            }, 500);
        }

        document.getElementById('start-button').addEventListener('click', () => {
            document.getElementById('start-screen').style.display = 'none';
            
            // Create hearts in a line
            const heartContainer = document.getElementById('heart-container');
            const positions = [
                { x: -4, y: 1.5, z: -5 },
                { x: -2, y: 1.5, z: -5 },
                { x: 0, y: 1.5, z: -5 },
                { x: 2, y: 1.5, z: -5 },
                { x: 4, y: 1.5, z: -5 }
            ];

            positions.forEach(position => {
                const heart = createHeart(position);
                heartContainer.appendChild(heart);
            });
        });
    </script>
</body>
</html>