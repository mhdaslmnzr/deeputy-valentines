<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reality Check</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Cormorant:wght@300;400;600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Playfair Display', serif;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .road-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-origin: center;
            transition: transform 3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .road-container.pull {
            transform: scale(0);
        }

        .road-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 3s ease;
        }

        .road-image.darken {
            filter: brightness(0.3) blur(2px);
        }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #f5f5f5;
            font-size: 2.5rem;
            text-align: center;
            z-index: 2;
            width: 90%;
            max-width: 900px;
            line-height: 1.8;
        }

        .message-line {
            opacity: 0;
            transform: translateY(20px);
            transition: all 2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .message-line.show {
            opacity: 1;
            transform: translateY(0);
        }

        .message-line.accent {
            color: #B7916C;
        }

        .overlay {
            position: fixed;
            inset: 0;
            background: #0a0a0a;
            opacity: 0;
            transition: opacity 3s ease;
            z-index: 1;
        }

        .overlay.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <canvas id="C"></canvas>
    <div class="road-container">
        <img src="road.png" alt="The Roads" class="road-image">
    </div>
    <div class="overlay"></div>
    <div class="message">
        <div class="message-line">Let there be countless realities, across infinite worlds,</div>
        <div class="message-line accent">I found you in this oneâ€”and that's all that matters.</div>
    </div>

    <script>
    window.onload = function() {
        window.requestAnimFrame = (function() {
            return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function(callback) {
                    window.setTimeout(callback, 1000 / 60);
                };
        })();

        const C = document.getElementById("C");
        const ctx = C.getContext("2d");
        const roadContainer = document.querySelector('.road-container');
        const message = document.querySelector('.message');

        const num = 3333;  // number of stars
        let added_mass = 0;
        let holeRadius = 30;
        let radiusLimit = (C.width + C.height) / 6;
        let hole_volume = 0;
        const G = 0.033;  // gravity constant

        let R = [];
        
        class Star {
            constructor(x, y, r, volume, color, angle, orbitRadius, angularSpeed, randomSpeed0, acceleration) {
                this.x = x;
                this.y = y;
                this.r = r;
                this.volume = volume;
                this.color = color;
                this.angle = angle;
                this.orbitRadius = orbitRadius;
                this.angularSpeed = angularSpeed;
                this.randomSpeed0 = randomSpeed0;
                this.acceleration = acceleration;
            }
        }

        function makeStar(new_star) {
            const x = C.width / 2;
            const y = C.height / 2;
            const r = Math.random() * 2 + 0.5;
            const volume = (4 / 3) * Math.PI * Math.pow(r, 3);
            const color = "rgba(255,255,255,1)";
            const angle = Math.random() * (2 * Math.PI);
            
            let orbitRadius;
            if (new_star === 0) {
                orbitRadius = (Math.random() * (C.width + C.height)) / 3;
            } else {
                orbitRadius = Math.sqrt(Math.pow(C.width/2 - C.width, 2) + Math.pow(C.height/2 - C.height, 2)) + Math.random() * 200;
            }
            
            const angularSpeed = 0.3 * Math.random() * (Math.PI / orbitRadius);
            const randomSpeed0 = Math.random() * (Math.PI / (10 * orbitRadius));
            const acceleration = 0;

            R.push(new Star(x, y, r, volume, color, angle, orbitRadius, angularSpeed, randomSpeed0, acceleration));
        }

        function init() {
            for (let i = 0; i < num; i++) {
                makeStar(0);
            }
        }

        function setCanvasSize() {
            C.width = window.innerWidth;
            C.height = window.innerHeight;
            radiusLimit = (C.width + C.height) / 10;
        }

        function setBG() {
            ctx.fillStyle = "rgba(20,20,24,.2)";
            ctx.fillRect(0, 0, C.width, C.height);
        }

        function drawCenter() {
            ctx.fillStyle = "#111";
            ctx.shadowColor = "#fff";
            ctx.shadowBlur = 0.5 * holeRadius;

            ctx.beginPath();
            ctx.arc(C.width / 2, C.height / 2, holeRadius, 0, 2 * Math.PI);
            ctx.closePath();
            ctx.fill();

            ctx.shadowColor = "none";
            ctx.shadowBlur = 0;

            if (holeRadius <= radiusLimit) {
                holeRadius = 2 * Math.sqrt(added_mass / Math.PI) + 30;
            }
        }

        function updateStar(i) {
            const star = R[i];

            star.x = C.width / 2 + Math.cos(star.angle) * star.orbitRadius;
            star.y = C.height / 2 + Math.sin(star.angle) * star.orbitRadius;
            star.angle += star.angularSpeed;

            star.acceleration = G * (star.r * hole_volume) / Math.pow(star.orbitRadius, 2) + 0.1;

            star.color = `rgba(255,${Math.round(255 * ((star.orbitRadius - holeRadius) / 200))},${Math.round(255 * ((star.orbitRadius - holeRadius) / 200))},1)`;

            if (star.orbitRadius >= holeRadius) {
                star.orbitRadius -= star.acceleration;
            } else {
                added_mass += star.r;
                R.splice(i, 1);
                makeStar(1);
            }
        }

        function isVisible(star) {
            return !(star.x > C.width || star.x + star.r < 0 || 
                    star.y > C.height || star.y + star.r < 0);
        }

        function drawStar(star) {
            ctx.fillStyle = star.color;
            ctx.beginPath();
            ctx.fillRect(star.x, star.y, star.r, star.r);
            ctx.fill();
        }

        function loop() {
            setBG();
            
            hole_volume = (3 / 4) * Math.PI * Math.pow(holeRadius, 3);
            
            for (let i = 0; i < R.length; i++) {
                const star = R[i];
                if (isVisible(star)) drawStar(star);
                updateStar(i);
            }

            drawCenter();
            requestAnimFrame(loop);
        }

        // Start the sequence
function startSequence() {
    const roadContainer = document.querySelector('.road-container');
    const roadImage = document.querySelector('.road-image');
    const overlay = document.querySelector('.overlay');
    const messageLines = document.querySelectorAll('.message-line');

    // Start sequence
    setTimeout(() => {
        // First darken the image
        roadImage.classList.add('darken');
        
        // Start black hole pull
        setTimeout(() => {
            roadContainer.classList.add('pull');
            
            // Fade to complete black
            setTimeout(() => {
                overlay.classList.add('show');
                
                // First line of text
                setTimeout(() => {
                    messageLines[0].classList.add('show');
                    
                    // Second line of text
                    setTimeout(() => {
                        messageLines[1].classList.add('show');
                    }, 2000);  // 2s delay for second line
                }, 2000);  // 2s delay before first text
            }, 3000);  // 3s for black hole effect
        }, 1000);  // 1s for initial darkening
    }, 2000);  // 2s initial pause
}

// Initialize black hole
setCanvasSize();
setBG();
init();
loop();

// Start the sequence after a short delay
setTimeout(startSequence, 2000);
    }; // Added missing closing brace for window.onload
    </script>
</body>
</html>